"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chat/[chatId]/message/route";
exports.ids = ["app/api/chat/[chatId]/message/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("pg");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2F%5BchatId%5D%2Fmessage%2Froute&page=%2Fapi%2Fchat%2F%5BchatId%5D%2Fmessage%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2F%5BchatId%5D%2Fmessage%2Froute.ts&appDir=D%3A%5CAssignments%5CCointab%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CAssignments%5CCointab&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2F%5BchatId%5D%2Fmessage%2Froute&page=%2Fapi%2Fchat%2F%5BchatId%5D%2Fmessage%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2F%5BchatId%5D%2Fmessage%2Froute.ts&appDir=D%3A%5CAssignments%5CCointab%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CAssignments%5CCointab&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_Assignments_Cointab_app_api_chat_chatId_message_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/chat/[chatId]/message/route.ts */ \"(rsc)/./app/api/chat/[chatId]/message/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chat/[chatId]/message/route\",\n        pathname: \"/api/chat/[chatId]/message\",\n        filename: \"route\",\n        bundlePath: \"app/api/chat/[chatId]/message/route\"\n    },\n    resolvedPagePath: \"D:\\\\Assignments\\\\Cointab\\\\app\\\\api\\\\chat\\\\[chatId]\\\\message\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_Assignments_Cointab_app_api_chat_chatId_message_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/chat/[chatId]/message/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjaGF0JTJGJTVCY2hhdElkJTVEJTJGbWVzc2FnZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGY2hhdCUyRiU1QmNoYXRJZCU1RCUyRm1lc3NhZ2UlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZjaGF0JTJGJTVCY2hhdElkJTVEJTJGbWVzc2FnZSUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDQXNzaWdubWVudHMlNUNDb2ludGFiJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1EJTNBJTVDQXNzaWdubWVudHMlNUNDb2ludGFiJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3FCO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29pbnRhYi1jaGF0Z3B0LWNsb25lLz8yZTY4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkQ6XFxcXEFzc2lnbm1lbnRzXFxcXENvaW50YWJcXFxcYXBwXFxcXGFwaVxcXFxjaGF0XFxcXFtjaGF0SWRdXFxcXG1lc3NhZ2VcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NoYXQvW2NoYXRJZF0vbWVzc2FnZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NoYXQvW2NoYXRJZF0vbWVzc2FnZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvY2hhdC9bY2hhdElkXS9tZXNzYWdlL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiRDpcXFxcQXNzaWdubWVudHNcXFxcQ29pbnRhYlxcXFxhcHBcXFxcYXBpXFxcXGNoYXRcXFxcW2NoYXRJZF1cXFxcbWVzc2FnZVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9jaGF0L1tjaGF0SWRdL21lc3NhZ2Uvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2F%5BchatId%5D%2Fmessage%2Froute&page=%2Fapi%2Fchat%2F%5BchatId%5D%2Fmessage%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2F%5BchatId%5D%2Fmessage%2Froute.ts&appDir=D%3A%5CAssignments%5CCointab%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CAssignments%5CCointab&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/chat/[chatId]/message/route.ts":
/*!************************************************!*\
  !*** ./app/api/chat/[chatId]/message/route.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var _lib_ollama__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/ollama */ \"(rsc)/./lib/ollama.ts\");\n\n\n\nconst ollamaClient = new _lib_ollama__WEBPACK_IMPORTED_MODULE_2__.OllamaClient();\nasync function POST(request, { params }) {\n    try {\n        const chatId = parseInt(params.chatId);\n        const { message } = await request.json();\n        // Save user message\n        await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(\"INSERT INTO messages (chat_id, role, content) VALUES ($1, $2, $3)\", [\n            chatId,\n            \"user\",\n            message\n        ]);\n        // Update chat timestamp\n        await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(\"UPDATE chats SET updated_at = CURRENT_TIMESTAMP WHERE id = $1\", [\n            chatId\n        ]);\n        // Generate title if this is the first message\n        const messageCount = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(\"SELECT COUNT(*) as count FROM messages WHERE chat_id = $1\", [\n            chatId\n        ]);\n        if (parseInt(messageCount.rows[0].count) === 1) {\n            // Auto-generate title from first message\n            const title = message.length > 50 ? message.substring(0, 47) + \"...\" : message;\n            await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(\"UPDATE chats SET title = $1 WHERE id = $2\", [\n                title,\n                chatId\n            ]);\n        }\n        // Create streaming response\n        const stream = new ReadableStream({\n            async start (controller) {\n                try {\n                    let fullResponse = \"\";\n                    for await (const chunk of ollamaClient.generateStream(message)){\n                        fullResponse += chunk;\n                        controller.enqueue(`data: ${JSON.stringify({\n                            chunk,\n                            done: false\n                        })}\\n\\n`);\n                    }\n                    // Save assistant response\n                    await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(\"INSERT INTO messages (chat_id, role, content) VALUES ($1, $2, $3)\", [\n                        chatId,\n                        \"assistant\",\n                        fullResponse\n                    ]);\n                    controller.enqueue(`data: ${JSON.stringify({\n                        chunk: \"\",\n                        done: true\n                    })}\\n\\n`);\n                    controller.close();\n                } catch (error) {\n                    console.error(\"Streaming error:\", error);\n                    controller.enqueue(`data: ${JSON.stringify({\n                        error: \"Stream error\"\n                    })}\\n\\n`);\n                    controller.close();\n                }\n            }\n        });\n        return new next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"](stream, {\n            headers: {\n                \"Content-Type\": \"text/event-stream\",\n                \"Cache-Control\": \"no-cache\",\n                \"Connection\": \"keep-alive\"\n            }\n        });\n    } catch (error) {\n        console.error(\"Error processing message:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to process message\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2NoYXQvW2NoYXRJZF0vbWVzc2FnZS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdEO0FBQzVCO0FBQ2dCO0FBRTVDLE1BQU1HLGVBQWUsSUFBSUQscURBQVlBO0FBRTlCLGVBQWVFLEtBQ3BCQyxPQUFvQixFQUNwQixFQUFFQyxNQUFNLEVBQWtDO0lBRTFDLElBQUk7UUFDRixNQUFNQyxTQUFTQyxTQUFTRixPQUFPQyxNQUFNO1FBQ3JDLE1BQU0sRUFBRUUsT0FBTyxFQUFFLEdBQUcsTUFBTUosUUFBUUssSUFBSTtRQUV0QyxvQkFBb0I7UUFDcEIsTUFBTVQsK0NBQUlBLENBQUNVLEtBQUssQ0FDZCxxRUFDQTtZQUFDSjtZQUFRO1lBQVFFO1NBQVE7UUFHM0Isd0JBQXdCO1FBQ3hCLE1BQU1SLCtDQUFJQSxDQUFDVSxLQUFLLENBQ2QsaUVBQ0E7WUFBQ0o7U0FBTztRQUdWLDhDQUE4QztRQUM5QyxNQUFNSyxlQUFlLE1BQU1YLCtDQUFJQSxDQUFDVSxLQUFLLENBQ25DLDZEQUNBO1lBQUNKO1NBQU87UUFHVixJQUFJQyxTQUFTSSxhQUFhQyxJQUFJLENBQUMsRUFBRSxDQUFDQyxLQUFLLE1BQU0sR0FBRztZQUM5Qyx5Q0FBeUM7WUFDekMsTUFBTUMsUUFBUU4sUUFBUU8sTUFBTSxHQUFHLEtBQUtQLFFBQVFRLFNBQVMsQ0FBQyxHQUFHLE1BQU0sUUFBUVI7WUFDdkUsTUFBTVIsK0NBQUlBLENBQUNVLEtBQUssQ0FDZCw2Q0FDQTtnQkFBQ0k7Z0JBQU9SO2FBQU87UUFFbkI7UUFFQSw0QkFBNEI7UUFDNUIsTUFBTVcsU0FBUyxJQUFJQyxlQUFlO1lBQ2hDLE1BQU1DLE9BQU1DLFVBQVU7Z0JBQ3BCLElBQUk7b0JBQ0YsSUFBSUMsZUFBZTtvQkFFbkIsV0FBVyxNQUFNQyxTQUFTcEIsYUFBYXFCLGNBQWMsQ0FBQ2YsU0FBVTt3QkFDOURhLGdCQUFnQkM7d0JBQ2hCRixXQUFXSSxPQUFPLENBQUMsQ0FBQyxNQUFNLEVBQUVDLEtBQUtDLFNBQVMsQ0FBQzs0QkFBRUo7NEJBQU9LLE1BQU07d0JBQU0sR0FBRyxJQUFJLENBQUM7b0JBQzFFO29CQUVBLDBCQUEwQjtvQkFDMUIsTUFBTTNCLCtDQUFJQSxDQUFDVSxLQUFLLENBQ2QscUVBQ0E7d0JBQUNKO3dCQUFRO3dCQUFhZTtxQkFBYTtvQkFHckNELFdBQVdJLE9BQU8sQ0FBQyxDQUFDLE1BQU0sRUFBRUMsS0FBS0MsU0FBUyxDQUFDO3dCQUFFSixPQUFPO3dCQUFJSyxNQUFNO29CQUFLLEdBQUcsSUFBSSxDQUFDO29CQUMzRVAsV0FBV1EsS0FBSztnQkFDbEIsRUFBRSxPQUFPQyxPQUFPO29CQUNkQyxRQUFRRCxLQUFLLENBQUMsb0JBQW9CQTtvQkFDbENULFdBQVdJLE9BQU8sQ0FBQyxDQUFDLE1BQU0sRUFBRUMsS0FBS0MsU0FBUyxDQUFDO3dCQUFFRyxPQUFPO29CQUFlLEdBQUcsSUFBSSxDQUFDO29CQUMzRVQsV0FBV1EsS0FBSztnQkFDbEI7WUFDRjtRQUNGO1FBRUEsT0FBTyxJQUFJN0Isa0ZBQVlBLENBQUNrQixRQUFRO1lBQzlCYyxTQUFTO2dCQUNQLGdCQUFnQjtnQkFDaEIsaUJBQWlCO2dCQUNqQixjQUFjO1lBQ2hCO1FBQ0Y7SUFDRixFQUFFLE9BQU9GLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDZCQUE2QkE7UUFDM0MsT0FBTzlCLGtGQUFZQSxDQUFDVSxJQUFJLENBQUM7WUFBRW9CLE9BQU87UUFBNEIsR0FBRztZQUFFRyxRQUFRO1FBQUk7SUFDakY7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2NvaW50YWItY2hhdGdwdC1jbG9uZS8uL2FwcC9hcGkvY2hhdC9bY2hhdElkXS9tZXNzYWdlL3JvdXRlLnRzPzIzNGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHBvb2wgZnJvbSAnQC9saWIvZGInO1xyXG5pbXBvcnQgeyBPbGxhbWFDbGllbnQgfSBmcm9tICdAL2xpYi9vbGxhbWEnO1xyXG5cclxuY29uc3Qgb2xsYW1hQ2xpZW50ID0gbmV3IE9sbGFtYUNsaWVudCgpO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QoXHJcbiAgcmVxdWVzdDogTmV4dFJlcXVlc3QsXHJcbiAgeyBwYXJhbXMgfTogeyBwYXJhbXM6IHsgY2hhdElkOiBzdHJpbmcgfSB9XHJcbikge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBjaGF0SWQgPSBwYXJzZUludChwYXJhbXMuY2hhdElkKTtcclxuICAgIGNvbnN0IHsgbWVzc2FnZSB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XHJcbiAgICBcclxuICAgIC8vIFNhdmUgdXNlciBtZXNzYWdlXHJcbiAgICBhd2FpdCBwb29sLnF1ZXJ5KFxyXG4gICAgICAnSU5TRVJUIElOVE8gbWVzc2FnZXMgKGNoYXRfaWQsIHJvbGUsIGNvbnRlbnQpIFZBTFVFUyAoJDEsICQyLCAkMyknLFxyXG4gICAgICBbY2hhdElkLCAndXNlcicsIG1lc3NhZ2VdXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICAvLyBVcGRhdGUgY2hhdCB0aW1lc3RhbXBcclxuICAgIGF3YWl0IHBvb2wucXVlcnkoXHJcbiAgICAgICdVUERBVEUgY2hhdHMgU0VUIHVwZGF0ZWRfYXQgPSBDVVJSRU5UX1RJTUVTVEFNUCBXSEVSRSBpZCA9ICQxJyxcclxuICAgICAgW2NoYXRJZF1cclxuICAgICk7XHJcbiAgICBcclxuICAgIC8vIEdlbmVyYXRlIHRpdGxlIGlmIHRoaXMgaXMgdGhlIGZpcnN0IG1lc3NhZ2VcclxuICAgIGNvbnN0IG1lc3NhZ2VDb3VudCA9IGF3YWl0IHBvb2wucXVlcnkoXHJcbiAgICAgICdTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgRlJPTSBtZXNzYWdlcyBXSEVSRSBjaGF0X2lkID0gJDEnLFxyXG4gICAgICBbY2hhdElkXVxyXG4gICAgKTtcclxuICAgIFxyXG4gICAgaWYgKHBhcnNlSW50KG1lc3NhZ2VDb3VudC5yb3dzWzBdLmNvdW50KSA9PT0gMSkge1xyXG4gICAgICAvLyBBdXRvLWdlbmVyYXRlIHRpdGxlIGZyb20gZmlyc3QgbWVzc2FnZVxyXG4gICAgICBjb25zdCB0aXRsZSA9IG1lc3NhZ2UubGVuZ3RoID4gNTAgPyBtZXNzYWdlLnN1YnN0cmluZygwLCA0NykgKyAnLi4uJyA6IG1lc3NhZ2U7XHJcbiAgICAgIGF3YWl0IHBvb2wucXVlcnkoXHJcbiAgICAgICAgJ1VQREFURSBjaGF0cyBTRVQgdGl0bGUgPSAkMSBXSEVSRSBpZCA9ICQyJyxcclxuICAgICAgICBbdGl0bGUsIGNoYXRJZF1cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ3JlYXRlIHN0cmVhbWluZyByZXNwb25zZVxyXG4gICAgY29uc3Qgc3RyZWFtID0gbmV3IFJlYWRhYmxlU3RyZWFtKHtcclxuICAgICAgYXN5bmMgc3RhcnQoY29udHJvbGxlcikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBsZXQgZnVsbFJlc3BvbnNlID0gJyc7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygb2xsYW1hQ2xpZW50LmdlbmVyYXRlU3RyZWFtKG1lc3NhZ2UpKSB7XHJcbiAgICAgICAgICAgIGZ1bGxSZXNwb25zZSArPSBjaHVuaztcclxuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGBkYXRhOiAke0pTT04uc3RyaW5naWZ5KHsgY2h1bmssIGRvbmU6IGZhbHNlIH0pfVxcblxcbmApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBTYXZlIGFzc2lzdGFudCByZXNwb25zZVxyXG4gICAgICAgICAgYXdhaXQgcG9vbC5xdWVyeShcclxuICAgICAgICAgICAgJ0lOU0VSVCBJTlRPIG1lc3NhZ2VzIChjaGF0X2lkLCByb2xlLCBjb250ZW50KSBWQUxVRVMgKCQxLCAkMiwgJDMpJyxcclxuICAgICAgICAgICAgW2NoYXRJZCwgJ2Fzc2lzdGFudCcsIGZ1bGxSZXNwb25zZV1cclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShgZGF0YTogJHtKU09OLnN0cmluZ2lmeSh7IGNodW5rOiAnJywgZG9uZTogdHJ1ZSB9KX1cXG5cXG5gKTtcclxuICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignU3RyZWFtaW5nIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShgZGF0YTogJHtKU09OLnN0cmluZ2lmeSh7IGVycm9yOiAnU3RyZWFtIGVycm9yJyB9KX1cXG5cXG5gKTtcclxuICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2Uoc3RyZWFtLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ3RleHQvZXZlbnQtc3RyZWFtJyxcclxuICAgICAgICAnQ2FjaGUtQ29udHJvbCc6ICduby1jYWNoZScsXHJcbiAgICAgICAgJ0Nvbm5lY3Rpb24nOiAna2VlcC1hbGl2ZScsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBtZXNzYWdlOicsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIHByb2Nlc3MgbWVzc2FnZScgfSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInBvb2wiLCJPbGxhbWFDbGllbnQiLCJvbGxhbWFDbGllbnQiLCJQT1NUIiwicmVxdWVzdCIsInBhcmFtcyIsImNoYXRJZCIsInBhcnNlSW50IiwibWVzc2FnZSIsImpzb24iLCJxdWVyeSIsIm1lc3NhZ2VDb3VudCIsInJvd3MiLCJjb3VudCIsInRpdGxlIiwibGVuZ3RoIiwic3Vic3RyaW5nIiwic3RyZWFtIiwiUmVhZGFibGVTdHJlYW0iLCJzdGFydCIsImNvbnRyb2xsZXIiLCJmdWxsUmVzcG9uc2UiLCJjaHVuayIsImdlbmVyYXRlU3RyZWFtIiwiZW5xdWV1ZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJkb25lIiwiY2xvc2UiLCJlcnJvciIsImNvbnNvbGUiLCJoZWFkZXJzIiwic3RhdHVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/chat/[chatId]/message/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   initializeDatabase: () => (/* binding */ initializeDatabase)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pg__WEBPACK_IMPORTED_MODULE_0__);\n\nconst pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool({\n    user: process.env.DB_USER || \"postgres\",\n    host: process.env.DB_HOST || \"localhost\",\n    database: process.env.DB_NAME || \"chatgpt_clone\",\n    password: process.env.DB_PASSWORD || \"password\",\n    port: parseInt(process.env.DB_PORT || \"5432\")\n});\nconst initializeDatabase = async ()=>{\n    try {\n        // Create chats table\n        await pool.query(`\r\n      CREATE TABLE IF NOT EXISTS chats (\r\n        id SERIAL PRIMARY KEY,\r\n        title VARCHAR(255) NOT NULL DEFAULT 'New Chat',\r\n        created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\r\n        updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP\r\n      )\r\n    `);\n        // Create messages table\n        await pool.query(`\r\n      CREATE TABLE IF NOT EXISTS messages (\r\n        id SERIAL PRIMARY KEY,\r\n        chat_id INTEGER REFERENCES chats(id) ON DELETE CASCADE,\r\n        role VARCHAR(20) NOT NULL CHECK (role IN ('user', 'assistant')),\r\n        content TEXT NOT NULL,\r\n        created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP\r\n      )\r\n    `);\n        console.log(\"Database initialized successfully\");\n    } catch (error) {\n        console.error(\"Error initializing database:\", error);\n        throw error;\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (pool);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEwQjtBQUUxQixNQUFNQyxPQUFPLElBQUlELG9DQUFJQSxDQUFDO0lBQ3BCRSxNQUFNQyxRQUFRQyxHQUFHLENBQUNDLE9BQU8sSUFBSTtJQUM3QkMsTUFBTUgsUUFBUUMsR0FBRyxDQUFDRyxPQUFPLElBQUk7SUFDN0JDLFVBQVVMLFFBQVFDLEdBQUcsQ0FBQ0ssT0FBTyxJQUFJO0lBQ2pDQyxVQUFVUCxRQUFRQyxHQUFHLENBQUNPLFdBQVcsSUFBSTtJQUNyQ0MsTUFBTUMsU0FBU1YsUUFBUUMsR0FBRyxDQUFDVSxPQUFPLElBQUk7QUFDeEM7QUFFTyxNQUFNQyxxQkFBcUI7SUFDaEMsSUFBSTtRQUNGLHFCQUFxQjtRQUNyQixNQUFNZCxLQUFLZSxLQUFLLENBQUMsQ0FBQzs7Ozs7OztJQU9sQixDQUFDO1FBRUQsd0JBQXdCO1FBQ3hCLE1BQU1mLEtBQUtlLEtBQUssQ0FBQyxDQUFDOzs7Ozs7OztJQVFsQixDQUFDO1FBRURDLFFBQVFDLEdBQUcsQ0FBQztJQUNkLEVBQUUsT0FBT0MsT0FBTztRQUNkRixRQUFRRSxLQUFLLENBQUMsZ0NBQWdDQTtRQUM5QyxNQUFNQTtJQUNSO0FBQ0YsRUFBRTtBQUVGLGlFQUFlbEIsSUFBSUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NvaW50YWItY2hhdGdwdC1jbG9uZS8uL2xpYi9kYi50cz8xZGYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBvb2wgfSBmcm9tICdwZyc7XHJcblxyXG5jb25zdCBwb29sID0gbmV3IFBvb2woe1xyXG4gIHVzZXI6IHByb2Nlc3MuZW52LkRCX1VTRVIgfHwgJ3Bvc3RncmVzJyxcclxuICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NUIHx8ICdsb2NhbGhvc3QnLFxyXG4gIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FIHx8ICdjaGF0Z3B0X2Nsb25lJyxcclxuICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQgfHwgJ3Bhc3N3b3JkJyxcclxuICBwb3J0OiBwYXJzZUludChwcm9jZXNzLmVudi5EQl9QT1JUIHx8ICc1NDMyJyksXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGluaXRpYWxpemVEYXRhYmFzZSA9IGFzeW5jICgpID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gQ3JlYXRlIGNoYXRzIHRhYmxlXHJcbiAgICBhd2FpdCBwb29sLnF1ZXJ5KGBcclxuICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgY2hhdHMgKFxyXG4gICAgICAgIGlkIFNFUklBTCBQUklNQVJZIEtFWSxcclxuICAgICAgICB0aXRsZSBWQVJDSEFSKDI1NSkgTk9UIE5VTEwgREVGQVVMVCAnTmV3IENoYXQnLFxyXG4gICAgICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QIFdJVEggVElNRSBaT05FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXHJcbiAgICAgICAgdXBkYXRlZF9hdCBUSU1FU1RBTVAgV0lUSCBUSU1FIFpPTkUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxyXG4gICAgICApXHJcbiAgICBgKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgbWVzc2FnZXMgdGFibGVcclxuICAgIGF3YWl0IHBvb2wucXVlcnkoYFxyXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBtZXNzYWdlcyAoXHJcbiAgICAgICAgaWQgU0VSSUFMIFBSSU1BUlkgS0VZLFxyXG4gICAgICAgIGNoYXRfaWQgSU5URUdFUiBSRUZFUkVOQ0VTIGNoYXRzKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcclxuICAgICAgICByb2xlIFZBUkNIQVIoMjApIE5PVCBOVUxMIENIRUNLIChyb2xlIElOICgndXNlcicsICdhc3Npc3RhbnQnKSksXHJcbiAgICAgICAgY29udGVudCBURVhUIE5PVCBOVUxMLFxyXG4gICAgICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QIFdJVEggVElNRSBaT05FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVBcclxuICAgICAgKVxyXG4gICAgYCk7XHJcblxyXG4gICAgY29uc29sZS5sb2coJ0RhdGFiYXNlIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmcgZGF0YWJhc2U6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcG9vbDtcclxuIl0sIm5hbWVzIjpbIlBvb2wiLCJwb29sIiwidXNlciIsInByb2Nlc3MiLCJlbnYiLCJEQl9VU0VSIiwiaG9zdCIsIkRCX0hPU1QiLCJkYXRhYmFzZSIsIkRCX05BTUUiLCJwYXNzd29yZCIsIkRCX1BBU1NXT1JEIiwicG9ydCIsInBhcnNlSW50IiwiREJfUE9SVCIsImluaXRpYWxpemVEYXRhYmFzZSIsInF1ZXJ5IiwiY29uc29sZSIsImxvZyIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./lib/ollama.ts":
/*!***********************!*\
  !*** ./lib/ollama.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OllamaClient: () => (/* binding */ OllamaClient)\n/* harmony export */ });\nclass OllamaClient {\n    constructor(baseUrl = \"http://localhost:11434\"){\n        this.abortController = null;\n        this.baseUrl = baseUrl;\n    }\n    async *generateStream(prompt, model = \"gemma:2b\") {\n        this.abortController = new AbortController();\n        try {\n            const response = await fetch(`${this.baseUrl}/api/generate`, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    model,\n                    prompt,\n                    stream: true\n                }),\n                signal: this.abortController.signal\n            });\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`);\n            }\n            const reader = response.body?.getReader();\n            if (!reader) {\n                throw new Error(\"No readable stream available\");\n            }\n            const decoder = new TextDecoder();\n            let buffer = \"\";\n            try {\n                while(true){\n                    const { done, value } = await reader.read();\n                    if (done) break;\n                    buffer += decoder.decode(value, {\n                        stream: true\n                    });\n                    const lines = buffer.split(\"\\n\");\n                    buffer = lines.pop() || \"\";\n                    for (const line of lines){\n                        if (line.trim()) {\n                            try {\n                                const data = JSON.parse(line);\n                                if (data.response) {\n                                    yield data.response;\n                                }\n                                if (data.done) {\n                                    return;\n                                }\n                            } catch (parseError) {\n                                console.error(\"Error parsing JSON:\", parseError);\n                            }\n                        }\n                    }\n                }\n            } finally{\n                reader.releaseLock();\n            }\n        } catch (error) {\n            if (error.name === \"AbortError\") {\n                console.log(\"Stream was aborted\");\n                return;\n            }\n            throw error;\n        }\n    }\n    stopGeneration() {\n        if (this.abortController) {\n            this.abortController.abort();\n            this.abortController = null;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvb2xsYW1hLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFPTyxNQUFNQTtJQUlYQyxZQUFZQyxVQUFVLHdCQUF3QixDQUFFO2FBRnhDQyxrQkFBMEM7UUFHaEQsSUFBSSxDQUFDRCxPQUFPLEdBQUdBO0lBQ2pCO0lBRUEsT0FBT0UsZUFBZUMsTUFBYyxFQUFFQyxRQUFRLFVBQVUsRUFBeUM7UUFDL0YsSUFBSSxDQUFDSCxlQUFlLEdBQUcsSUFBSUk7UUFFM0IsSUFBSTtZQUNGLE1BQU1DLFdBQVcsTUFBTUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxDQUFDUCxPQUFPLENBQUMsYUFBYSxDQUFDLEVBQUU7Z0JBQzNEUSxRQUFRO2dCQUNSQyxTQUFTO29CQUNQLGdCQUFnQjtnQkFDbEI7Z0JBQ0FDLE1BQU1DLEtBQUtDLFNBQVMsQ0FBQztvQkFDbkJSO29CQUNBRDtvQkFDQVUsUUFBUTtnQkFDVjtnQkFDQUMsUUFBUSxJQUFJLENBQUNiLGVBQWUsQ0FBQ2EsTUFBTTtZQUNyQztZQUVBLElBQUksQ0FBQ1IsU0FBU1MsRUFBRSxFQUFFO2dCQUNoQixNQUFNLElBQUlDLE1BQU0sQ0FBQyxvQkFBb0IsRUFBRVYsU0FBU1csTUFBTSxDQUFDLENBQUM7WUFDMUQ7WUFFQSxNQUFNQyxTQUFTWixTQUFTSSxJQUFJLEVBQUVTO1lBQzlCLElBQUksQ0FBQ0QsUUFBUTtnQkFDWCxNQUFNLElBQUlGLE1BQU07WUFDbEI7WUFFQSxNQUFNSSxVQUFVLElBQUlDO1lBQ3BCLElBQUlDLFNBQVM7WUFFYixJQUFJO2dCQUNGLE1BQU8sS0FBTTtvQkFDWCxNQUFNLEVBQUVDLElBQUksRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTU4sT0FBT08sSUFBSTtvQkFFekMsSUFBSUYsTUFBTTtvQkFFVkQsVUFBVUYsUUFBUU0sTUFBTSxDQUFDRixPQUFPO3dCQUFFWCxRQUFRO29CQUFLO29CQUMvQyxNQUFNYyxRQUFRTCxPQUFPTSxLQUFLLENBQUM7b0JBQzNCTixTQUFTSyxNQUFNRSxHQUFHLE1BQU07b0JBRXhCLEtBQUssTUFBTUMsUUFBUUgsTUFBTzt3QkFDeEIsSUFBSUcsS0FBS0MsSUFBSSxJQUFJOzRCQUNmLElBQUk7Z0NBQ0YsTUFBTUMsT0FBdUJyQixLQUFLc0IsS0FBSyxDQUFDSDtnQ0FDeEMsSUFBSUUsS0FBSzFCLFFBQVEsRUFBRTtvQ0FDakIsTUFBTTBCLEtBQUsxQixRQUFRO2dDQUNyQjtnQ0FDQSxJQUFJMEIsS0FBS1QsSUFBSSxFQUFFO29DQUNiO2dDQUNGOzRCQUNGLEVBQUUsT0FBT1csWUFBWTtnQ0FDbkJDLFFBQVFDLEtBQUssQ0FBQyx1QkFBdUJGOzRCQUN2Qzt3QkFDRjtvQkFDRjtnQkFDRjtZQUNGLFNBQVU7Z0JBQ1JoQixPQUFPbUIsV0FBVztZQUNwQjtRQUNGLEVBQUUsT0FBT0QsT0FBWTtZQUNuQixJQUFJQSxNQUFNRSxJQUFJLEtBQUssY0FBYztnQkFDL0JILFFBQVFJLEdBQUcsQ0FBQztnQkFDWjtZQUNGO1lBQ0EsTUFBTUg7UUFDUjtJQUNGO0lBRUFJLGlCQUFpQjtRQUNmLElBQUksSUFBSSxDQUFDdkMsZUFBZSxFQUFFO1lBQ3hCLElBQUksQ0FBQ0EsZUFBZSxDQUFDd0MsS0FBSztZQUMxQixJQUFJLENBQUN4QyxlQUFlLEdBQUc7UUFDekI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29pbnRhYi1jaGF0Z3B0LWNsb25lLy4vbGliL29sbGFtYS50cz9mNmExIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgT2xsYW1hUmVzcG9uc2Uge1xyXG4gIG1vZGVsOiBzdHJpbmc7XHJcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xyXG4gIHJlc3BvbnNlOiBzdHJpbmc7XHJcbiAgZG9uZTogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE9sbGFtYUNsaWVudCB7XHJcbiAgcHJpdmF0ZSBiYXNlVXJsOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBhYm9ydENvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlciB8IG51bGwgPSBudWxsO1xyXG5cclxuICBjb25zdHJ1Y3RvcihiYXNlVXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MTE0MzQnKSB7XHJcbiAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgKmdlbmVyYXRlU3RyZWFtKHByb21wdDogc3RyaW5nLCBtb2RlbCA9ICdnZW1tYToyYicpOiBBc3luY0dlbmVyYXRvcjxzdHJpbmcsIHZvaWQsIHVua25vd24+IHtcclxuICAgIHRoaXMuYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuYmFzZVVybH0vYXBpL2dlbmVyYXRlYCwge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBtb2RlbCxcclxuICAgICAgICAgIHByb21wdCxcclxuICAgICAgICAgIHN0cmVhbTogdHJ1ZSxcclxuICAgICAgICB9KSxcclxuICAgICAgICBzaWduYWw6IHRoaXMuYWJvcnRDb250cm9sbGVyLnNpZ25hbCxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQIGVycm9yISBzdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCByZWFkZXIgPSByZXNwb25zZS5ib2R5Py5nZXRSZWFkZXIoKTtcclxuICAgICAgaWYgKCFyZWFkZXIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHJlYWRhYmxlIHN0cmVhbSBhdmFpbGFibGUnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xyXG4gICAgICBsZXQgYnVmZmVyID0gJyc7XHJcblxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICBjb25zdCB7IGRvbmUsIHZhbHVlIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoZG9uZSkgYnJlYWs7XHJcblxyXG4gICAgICAgICAgYnVmZmVyICs9IGRlY29kZXIuZGVjb2RlKHZhbHVlLCB7IHN0cmVhbTogdHJ1ZSB9KTtcclxuICAgICAgICAgIGNvbnN0IGxpbmVzID0gYnVmZmVyLnNwbGl0KCdcXG4nKTtcclxuICAgICAgICAgIGJ1ZmZlciA9IGxpbmVzLnBvcCgpIHx8ICcnO1xyXG5cclxuICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xyXG4gICAgICAgICAgICBpZiAobGluZS50cmltKCkpIHtcclxuICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YTogT2xsYW1hUmVzcG9uc2UgPSBKU09OLnBhcnNlKGxpbmUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEucmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgeWllbGQgZGF0YS5yZXNwb25zZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmRvbmUpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgSlNPTjonLCBwYXJzZUVycm9yKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgcmVhZGVyLnJlbGVhc2VMb2NrKCk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTdHJlYW0gd2FzIGFib3J0ZWQnKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdG9wR2VuZXJhdGlvbigpIHtcclxuICAgIGlmICh0aGlzLmFib3J0Q29udHJvbGxlcikge1xyXG4gICAgICB0aGlzLmFib3J0Q29udHJvbGxlci5hYm9ydCgpO1xyXG4gICAgICB0aGlzLmFib3J0Q29udHJvbGxlciA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJPbGxhbWFDbGllbnQiLCJjb25zdHJ1Y3RvciIsImJhc2VVcmwiLCJhYm9ydENvbnRyb2xsZXIiLCJnZW5lcmF0ZVN0cmVhbSIsInByb21wdCIsIm1vZGVsIiwiQWJvcnRDb250cm9sbGVyIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInN0cmVhbSIsInNpZ25hbCIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJyZWFkZXIiLCJnZXRSZWFkZXIiLCJkZWNvZGVyIiwiVGV4dERlY29kZXIiLCJidWZmZXIiLCJkb25lIiwidmFsdWUiLCJyZWFkIiwiZGVjb2RlIiwibGluZXMiLCJzcGxpdCIsInBvcCIsImxpbmUiLCJ0cmltIiwiZGF0YSIsInBhcnNlIiwicGFyc2VFcnJvciIsImNvbnNvbGUiLCJlcnJvciIsInJlbGVhc2VMb2NrIiwibmFtZSIsImxvZyIsInN0b3BHZW5lcmF0aW9uIiwiYWJvcnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/ollama.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2F%5BchatId%5D%2Fmessage%2Froute&page=%2Fapi%2Fchat%2F%5BchatId%5D%2Fmessage%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2F%5BchatId%5D%2Fmessage%2Froute.ts&appDir=D%3A%5CAssignments%5CCointab%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CAssignments%5CCointab&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();